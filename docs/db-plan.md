# Rubric Data & History Plan (Plain English)

This document explains, in simple terms, how we will save rubrics, user information, and the full history of changes when someone regenerates a part of a rubric.

## 1. Why Are We Adding a Database?
Right now rubrics are generated by AI, but nothing is saved. A database lets us:
- Remember which user created which rubric.
- Re-open an old rubric without regenerating it.
- Track every time a category (row) is regenerated by AI.
- Restore (roll back) a previous version if a new one is worse.
- Build user analytics later (e.g., "how many rubrics did I create?").

## 2. What Is Stored?
We store five main things:
1. Users – who is using the system.
2. Rubrics – the overall grading guide (title + description).
3. Categories – each row in the rubric (like "Logic", "Style", etc.).
4. Versions of a category – every time a category is regenerated, we save a new version.
5. Objectives – the individual point descriptions inside a category version (e.g., 10 pts = complete, 5 pts = partial).

We also optionally store a regeneration event (an audit record showing what changed and why).

## 2.1 Who owns what (per user)?
Every rubric is tied to the user who created it. Ownership flows like this:

- A rubric belongs to exactly one user (the creator).
- Each category belongs to a rubric, so it also belongs to that user.
- Each category version and its objectives belong to a category → rubric → user.
- By default, users only see their own rubrics.

## 3. How a Rubric Lives Over Time
Think of a rubric like a document with rows (categories). Each row can change independently:
- First time: AI creates the initial rubric (Version 1 for each category).
- Later: A user regenerates one category — Version 2 is saved. The old Version 1 is still there.
- Later: Regenerate again — Version 3 appears.
- If unhappy: User can roll back to Version 1 or Version 2.

We NEVER delete old versions. We just point the "current" category to the latest chosen version.

## 4. Simple Analogy
Imagine a bookshelf:
- The rubric is the shelf.
- Each category is a book slot.
- Each version of a category is a different edition of the same book.
- We keep all editions. One is marked as the "current edition".

## 5. What a Regeneration Does
When the user clicks "Regenerate Row":
1. The AI produces a new set of objectives for that category.
2. We save a new category version with those objectives.
3. We mark that version as the "current" one.
4. The previous version stays in history.

If the user had added an optional instruction, we save that too.

## 6. Rollback (Undo)
If the user wants to go back:
- We simply switch the "current version" pointer to an older version.
- No data is lost. No re-generation needed.

## 7. Example (Story)
Sarah creates a rubric for "Sorting Assignment". It has 4 categories. AI saves Version 1 for all.
Later she regenerates the "Algorithm Efficiency" category — new Version 2 is saved. Then she regenerates it again — Version 3.
She decides Version 2 was better. She rolls back. The system just switches the pointer back to Version 2. Version 3 remains in history.

## 8. What Data Looks Like (Simplified)
```
Rubric: "Sorting Assignment"
  Category: "Algorithm Efficiency" (current version → Version 3)
    Version 1: objectives (10, 7, 4, 0 points)
    Version 2: objectives (10, 7, 5, 2 points)
    Version 3: objectives (12, 8, 5, 1 points)
```
If rolled back to Version 2:
```
Rubric: "Sorting Assignment"
  Category: "Algorithm Efficiency" (current version → Version 2)
    Version 1: objectives (...)
    Version 2: objectives (...)
    Version 3: objectives (...)
```
Nothing is deleted.

## 9. Future Enhancements (Optional Later)
- Add comments per regeneration.
- Track time spent per rubric.
- Export history to CSV.
- Tag categories (e.g., "Logic", "UI", "Performance").

## 10. Summary in One Sentence
We store every rubric, and every change to its rows (categories), so users can always see history and go back if needed.

## 11. Glossary
| Term | Meaning |
|------|---------|
| Rubric | The whole grading guide (assignment-level). |
| Category | One row of grading focus (e.g., "Documentation"). |
| Objective | A point-level description (e.g., "10 pts: Fully documented functions"). |
| Version | A saved snapshot of a category's objectives at a moment in time. |
| Regeneration | Creating a new version of a category using AI. |
| Rollback | Switch back to an older version. |

## 12. Questions Stakeholders Might Ask
| Question | Answer |
|----------|--------|
| Do we lose old data? | No, all versions are kept. |
| Can we audit who made changes? | Yes, with user tracking added. |
| Does this slow things down? | No, versions are lightweight records. |
| Can we export rubrics? | Yes, we can add export features later. |
| Can we support multiple assignments per user? | Yes, each rubric links to a user. |

---
**End of Plan**
